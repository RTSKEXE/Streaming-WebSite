<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini-Streaming ‚Äî Catalogue Halloween</title>
  <meta name="description" content="Catalogue de films ‚Äî √©dition Halloween. Cliquez pour voir la fiche et acc√©der au lien du film.">
  
  <!-- Police Halloween -->
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0a0a0a;
      --card: #1a0a1a;
      --muted: #d9d9d9;
      --accent: #FF6B35;
      --glass: rgba(255,255,255,0.03);
      --radius: 14px;
      --max-width: 1100px;
      --gutter: 16px;
      --highlight: #FFC857;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Inter', sans-serif;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,107,53,0.08), transparent 6%),
                  linear-gradient(180deg, #0a0a0a 0%, #2B0B3F 100%);
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:24px;
      display:flex;
      justify-content:center;
      overflow-x:hidden;
    }

    /* Toiles d'araign√©e anim√©es */
    body::before{
      content:"";
      position:fixed;
      top:0;left:0;
      width:100%;height:100%;
      background-image: url('https://i.ibb.co/rk7T9bP/spider-web.png');
      background-size: cover;
      opacity:0.05;
      pointer-events:none;
      animation: spin 300s linear infinite;
    }
    @keyframes spin{
      0%{transform:rotate(0deg);}
      100%{transform:rotate(360deg);}
    }

    .app{width:100%;max-width:var(--max-width);}
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:18px;
    }
    .brand{display:flex;gap:12px;align-items:center;}
    .logo{
      width:44px;height:44px;border-radius:10px;
      background:linear-gradient(135deg,var(--accent),#7b61ff);
      display:flex;align-items:center;justify-content:center;font-weight:700;color:white;
      box-shadow:0 6px 18px rgba(0,0,0,0.5);
      font-family: 'Creepster', cursive;
      font-size:1.2rem;
    }
    h1{font-size:1.1rem;margin:0; font-family: 'Creepster', cursive; color:var(--highlight);}
    p.sub{margin:0;color:var(--muted);font-size:0.9rem}
    .controls{display:flex;gap:8px;align-items:center}
    .search{
      background:var(--glass);border:1px solid rgba(255,255,255,0.03);
      padding:8px 12px;border-radius:999px;color:var(--muted);
      display:flex;align-items:center;gap:8px;font-size:0.95rem;
      min-width:140px;
    }
    .toggle{
      background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:10px;color:var(--muted);
      transition: all 0.3s ease;
    }
    .toggle:hover{color:var(--accent);border-color:var(--accent);}
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:16px;
    }
    @media (max-width:900px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width:520px){ .grid{grid-template-columns: 1fr;} header{flex-direction:column;align-items:flex-start} }
    
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.2));
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.7);
      cursor:pointer;
      transition:transform .3s ease, box-shadow .3s ease;
      display:flex;flex-direction:column;
      min-height:220px;
      position:relative;
    }
    .card:hover{ transform:translateY(-6px); box-shadow: 0 18px 40px rgba(255,107,53,0.5);}
    
    .poster{
      width:100%;
      aspect-ratio: 2/3;
      object-fit:cover;
      display:block;
      background:linear-gradient(180deg,#2B0B3F,#0a0a0a);
      border-bottom:1px solid var(--highlight);
    }
    .meta{padding:12px;display:flex;align-items:center;justify-content:space-between;gap:8px}
    .title{font-weight:600;font-size:0.98rem; color:var(--highlight); font-family: 'Creepster', cursive;}
    .year{font-size:0.85rem;color:var(--muted)}
    
    /* Overlay */
    .overlay{
      position:fixed;inset:0;background:linear-gradient(180deg, rgba(10,0,10,0.85), rgba(43,11,63,0.95));
      display:flex;align-items:center;justify-content:center;padding:18px;
      backdrop-filter: blur(6px);
      z-index:60;
      opacity:0;pointer-events:none;transition:opacity .3s ease;
    }
    .overlay.open{opacity:1;pointer-events:auto}
    
    .detail{
      width:100%;max-width:900px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.2));
      border-radius:18px;padding:16px;display:grid;grid-template-columns: 38% 62%;gap:18px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.9);
    }
    @media (max-width:720px){ .detail{grid-template-columns:1fr;align-items:start;padding:12px;} }
    .detail .poster-lg{width:100%;border-radius:12px;aspect-ratio: 2/3;object-fit:cover; border:2px solid var(--accent);}
    .detail h2{margin:0 0 6px 0;font-family: 'Creepster', cursive; color:var(--highlight);}
    .detail .submeta{color:var(--muted);font-size:0.95rem;margin-bottom:12px}
    .desc{color:#d9d9d9;line-height:1.45;font-size:0.97rem;margin-bottom:16px}
    
    .actions{display:flex;gap:12px;align-items:center}
    .btn{
      padding:10px 16px;border-radius:12px;border:0;font-weight:700;cursor:pointer;
      box-shadow:0 8px 20px rgba(0,0,0,0.7);
      transition: all 0.3s ease;
    }
    .btn-primary{
      background:linear-gradient(90deg,var(--accent),#7b61ff);
      color:white;
    }
    .btn-primary:hover{
      filter: brightness(1.2);
      box-shadow:0 12px 25px rgba(255,107,53,0.6);
    }
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .btn-ghost:hover{border-color:var(--accent); color:var(--accent);}
    
    .close-x{margin-left:auto;background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer}
    .tag{background:rgba(255,107,53,0.2);padding:6px 8px;border-radius:8px;font-size:0.85rem;color:var(--highlight)}
    .empty{color:var(--muted);text-align:center;padding:36px;border-radius:12px;background:rgba(255,255,255,0.02)}
    
    /* Chauves-souris anim√©es */
    .bat{
      position:absolute;
      width:24px;height:24px;
      background-image:url('https://i.ibb.co/6r7Y7y1/bat.png');
      background-size:contain;
      background-repeat:no-repeat;
      animation: fly 8s linear infinite;
    }
    @keyframes fly{
      0%{transform:translate(0,0) rotate(0deg);}
      25%{transform:translate(200px,-50px) rotate(15deg);}
      50%{transform:translate(400px,20px) rotate(-15deg);}
      75%{transform:translate(600px,-40px) rotate(10deg);}
      100%{transform:translate(800px,10px) rotate(0deg);}
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand">
        <div class="logo">MS</div>
        <div>
          <h1>Mini-Streaming</h1>
          <p class="sub">Catalogue Halloween ‚Äî clique sur une affiche pour voir la fiche</p>
        </div>
      </div>
      <div class="controls">
        <label class="search" title="Recherche">
          üîé
          <input id="search" type="search" placeholder="Rechercher un film..." aria-label="Recherche" style="background:transparent;border:0;outline:none;color:inherit;width:120px">
        </label>
        <button class="toggle" id="sortBtn" title="Trier">Trier (popularit√©)</button>
      </div>
    </header>
    <main>
      <div id="grid" class="grid" aria-live="polite"></div>
      <div id="empty" class="empty" style="display:none;margin-top:12px">Aucun film trouv√©.</div>
    </main>
  </div>
  
  <div id="overlay" class="overlay" role="dialog" aria-hidden="true">
    <div class="detail" role="document" aria-labelledby="detail-title">
      <img id="detail-poster" class="poster-lg" src="" alt="Affiche du film">
      <div>
        <button class="close-x" id="closeBtn" aria-label="Fermer">‚úï</button>
        <h2 id="detail-title">Titre</h2>
        <div class="submeta" id="detail-sub">Ann√©e ‚Ä¢ Dur√©e ‚Ä¢ Genre ‚Ä¢ Note</div>
        <p class="desc" id="detail-desc">Description</p>
        <div class="actions">
          <a id="watchBtn" class="btn btn-primary" href="#" target="_blank" rel="noopener noreferrer">Voir le film</a>
          <button id="favBtn" class="btn btn-ghost">‚ô° Ajouter aux favoris</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Ajout de chauves-souris flottantes -->
  <div class="bat" style="top:50px; left:10px;"></div>
  <div class="bat" style="top:120px; left:50px; animation-delay:2s;"></div>
  <div class="bat" style="top:200px; left:20px; animation-delay:4s;"></div>

  <script>
    // Ton JS existant reste identique
    const movies = [
      {
        id: 'ACS1',
        title: '√Ä contre-sens.',
        year: 2023,
        duration: '1h42',
        genre: 'Romance',
        rating: '7.8',
        img: './AcontreSens1.jpg',
        desc: "A contre sens raconte l histoire de Eden une jeune femme independante dont la vie bascule lorsqu elle decouvre que le mysterieux Noah qu elle pensait detester cache un passe etroitement lie au sien. Entre secrets attirance et conflits leur relation devient une passion interdite qui les pousse a tout remettre en question.",
        url: 'https://sharecloudy.com/iframe/Ig1YRirleK'
      },
      {
        id: 'ACS2',
        title: '√Ä contre-sens 2.',
        year: 2024,
        duration: '2h00',
        genre: 'Romance/Drame',
        rating: '5.2',
        img: './AcontreSens2.jpg',
        desc: "A contre sens 2 poursuit l histoire de Eden et Noah alors qu ils affrontent de nouveaux defis dans leur relation. Entre incomprehensions et secrets du passe, leur amour est mis a l epreuve dans des circonstances inattendues.",
        url: 'https://sharecloudy.com/iframe/qbBPcdf0Um'
      },
      {
        id: 'ACSLD',
        title: '√Ä Contre-Sens : Londres',
        year: 2025,
        duration: '1h55',
        genre: 'Aventure',
        rating: 'N/A',
        img: './AcontreSensLD.jpg',
        desc: "A contre sens : Londres suit Eden qui demenage a Londres avec sa mere. Elle rencontre Nick, son demi-frere, et une attraction nait, pesee par les secrets de leur famille et les conflits de coeur.",
        url:  'https://sharecloudy.com/iframe/lr8v4ykQ3w'
      }
    ];

    const grid = document.getElementById('grid');
    const overlay = document.getElementById('overlay');
    const detailTitle = document.getElementById('detail-title');
    const detailPoster = document.getElementById('detail-poster');
    const detailDesc = document.getElementById('detail-desc');
    const detailSub = document.getElementById('detail-sub');
    const watchBtn = document.getElementById('watchBtn');
    const closeBtn = document.getElementById('closeBtn');
    const favBtn = document.getElementById('favBtn');
    const searchInput = document.getElementById('search');
    const emptyBox = document.getElementById('empty');
    const sortBtn = document.getElementById('sortBtn');

    let current = null;
    let sortedByPopularity = false;

    function renderGrid(list){
      grid.innerHTML = '';
      if(!list.length){ emptyBox.style.display='block'; return; } else emptyBox.style.display='none';
      list.forEach(m => {
        const card = document.createElement('article');
        card.className = 'card';
        card.tabIndex = 0;
        card.setAttribute('role', 'button');
        card.dataset.id = m.id;
        card.innerHTML = `
          <img class="poster" loading="lazy" src="${m.img}" alt="Affiche - ${escapeHTML(m.title)}">
          <div class="meta">
            <div>
              <div class="title">${escapeHTML(m.title)}</div>
              <div class="year">${m.year} ‚Ä¢ ${m.genre}</div>
            </div>
            <div class="tag">${m.rating}</div>
          </div>
        `;
        card.addEventListener('click', ()=> openDetail(m.id));
        card.addEventListener('keypress', (e)=> { if(e.key === 'Enter') openDetail(m.id) });
        grid.appendChild(card);
      });
    }

    function openDetail(id){
      const m = movies.find(x => x.id === id);
      if(!m) return;
      current = m;
      detailTitle.textContent = m.title;
      detailPoster.src = m.img;
      detailPoster.alt = 'Affiche de ' + m.title;
      detailDesc.textContent = m.desc;
      detailSub.textContent = `${m.year} ‚Ä¢ ${m.duration} ‚Ä¢ ${m.genre} ‚Ä¢ Note ${m.rating}`;

      if(m.comingSoon){
        watchBtn.textContent = "Bient√¥t disponible";
        watchBtn.classList.remove('btn-primary');
        watchBtn.classList.add('btn-ghost');
        watchBtn.removeAttribute('href');
      } else {
        watchBtn.textContent = "Voir le film";
        watchBtn.classList.add('btn-primary');
        watchBtn.href = m.url;
      }

      overlay.classList.add('open');
      overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }

    function closeDetail(){
      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      current = null;
    }

    function toggleFav(){
      if(!current) return;
      const key = 'ms_favs';
      const favs = JSON.parse(localStorage.getItem(key) || '[]');
      const exists = favs.includes(current.id);
      if(exists){
        const next = favs.filter(id => id !== current.id);
        localStorage.setItem(key, JSON.stringify(next));
        favBtn.textContent = '‚ô° Ajouter aux favoris';
      } else {
        favs.push(current.id);
        localStorage.setItem(key, JSON.stringify(favs));
        favBtn.textContent = '‚ô• Retir√© des favoris';
      }
    }

    searchInput.addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase();
      const result =       movies.filter(m => (m.title + ' ' + m.genre + ' ' + m.year).toLowerCase().includes(q));
      renderGrid(result);
    });

    sortBtn.addEventListener('click', ()=>{
      sortedByPopularity = !sortedByPopularity;
      if(sortedByPopularity){
        renderGrid([...movies].sort((a,b)=> b.rating.localeCompare(a.rating)));
        sortBtn.textContent = 'Trier (alphab√©tique)';
      } else {
        renderGrid(movies);
        sortBtn.textContent = 'Trier (popularit√©)';
      }
    });

    closeBtn.addEventListener('click', closeDetail);
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeDetail(); });
    document.addEventListener('keydown', (e)=> { if(e.key === 'Escape') closeDetail(); });
    favBtn.addEventListener('click', toggleFav);

    renderGrid(movies);

    function escapeHTML(s){ 
      return String(s).replace(/[&<>"']/g, function(m){ 
        return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m] 
      }); 
    }
  </script>
</body>
</html>
